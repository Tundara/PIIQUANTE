
var Multex = require('../src/multex');

var testMultex = function (multex) {
  console.log('multex', multex);
  var len = 3;
  var keys = [];
  for (var i = 0; i < len; ++i) {
    keys.push(multex.key());
    console.log('multex', multex);
  }
  for (var j = 0; j < len; ++j) {
    var key = keys[j];
    console.log('key', key);
    if (key.use()) {
      console.log('OK');
    }
    else {
      console.log('NO');
    }
  }
};

(function () {
  testMultex(new Multex());
})();

(function () {
  testMultex(new Multex.LastOnly());
})();

(function () {
  testMultex(new Multex.FirstOnly());
})();
